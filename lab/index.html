<!doctype html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ambient Pad — Browser Port (ESP32 → WebAudio)</title>
<style>
  :root{--bg:#0a0b0f;--fg:#e9eef7;--muted:#8ea0b5;--accent:#6ad1ff;--line:#18202b;}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font:14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial;}
  .app{display:grid;grid-template-columns: 1fr 360px; gap:24px; padding:20px; max-width:1200px; margin:0 auto;}
  .panel{background:#0f131a;border:1px solid var(--line);border-radius:12px;padding:16px;}
  h1{margin:0 0 8px;font-size:18px;}
  canvas{display:block;width:100%;height:auto;image-rendering:pixelated;border-radius:10px;border:1px solid var(--line);background:#000;}
  .row{display:flex; gap:10px; align-items:center;}
  .btn{cursor:pointer;background:#111825;border:1px solid var(--line);padding:8px 10px;border-radius:8px;color:var(--fg);}
  .btn:active{transform:translateY(1px)}
  .kv{display:grid;grid-template-columns:auto 1fr auto; gap:8px; align-items:center;}
  .meter{height:6px;background:#0c1220;border:1px solid var(--line);border-radius:999px;overflow:hidden}
  .meter>i{display:block;height:100%;background:linear-gradient(90deg,#3bbcff,#7fffd4);}
  .small{color:var(--muted);font-size:12px}
  code{background:#0b111a;border:1px solid var(--line);padding:2px 6px;border-radius:6px}
  @media (max-width: 980px){ .app{grid-template-columns:1fr} }
</style>
<body>
  <div class="app">
    <div class="panel">
      <h1>TFT (emulated)</h1>
      <canvas id="tft" width="160" height="128" title="Click or press Enter to change page. Use mouse wheel or ←/→ to change value."></canvas>
      <div class="small" style="margin-top:8px">
        Controls: <code>Enter / Click</code> → next page, <code>← / → / Wheel</code> → adjust, <code>Space</code> → start/stop
      </div>
    </div>

    <div class="panel">
      <h1>Live</h1>
      <div class="kv" style="margin-bottom:8px">
        <div>CPU (worklet est)</div>
        <div class="meter"><i id="cpu" style="width:0%"></i></div>
        <div id="cpuText" class="small">–</div>
      </div>
      <div class="kv" style="margin-bottom:8px">
        <div>Output</div>
        <div class="meter"><i id="out" style="width:0%"></i></div>
        <div id="outText" class="small">–</div>
      </div>
      <div class="row" style="margin-top:12px">
        <button id="start" class="btn">Start Audio</button>
        <button id="scene" class="btn">Trigger Scene</button>
        <button id="panic" class="btn">Panic (mute)</button>
      </div>
      <div style="margin-top:12px" class="small">
        Page order: Volume → Tempo → Space → Mood → Tone → Energy → Scene.
      </div>
    </div>
  </div>

  <script type="module" src="./loot.js"></script>
</body>
</html>